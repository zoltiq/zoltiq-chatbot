(function(nr,Yt){typeof exports=="object"&&typeof module<"u"?module.exports=Yt():typeof define=="function"&&define.amd?define(Yt):(nr=typeof globalThis<"u"?globalThis:nr||self,nr.ChatBot=Yt())})(this,function(){"use strict";var Yt=Array.isArray,xr=Array.from,Ln=Object.defineProperty,le=Object.getOwnPropertyDescriptor,Wr=Object.getOwnPropertyDescriptors,Fn=Object.prototype,Wn=Array.prototype,ar=Object.getPrototypeOf;const jt=()=>{};function Bn(t){return t()}function or(t){for(var e=0;e<t.length;e++)t[e]()}const vt=2,Br=4,Ne=8,kr=16,gt=32,$e=64,Jt=128,ir=256,ot=512,qt=1024,ue=2048,Et=4096,Me=8192,Hn=16384,sr=32768,Hr=65536,Gn=1<<18,Gr=1<<19,Rt=Symbol("$state"),Un=Symbol("legacy props"),Kn=Symbol("");function Ur(t){return t===this.v}function Kr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Er(t){return!Kr(t,this.v)}function Zn(t){throw new Error("effect_in_teardown")}function Vn(){throw new Error("effect_in_unowned_derived")}function Yn(t){throw new Error("effect_orphan")}function Jn(){throw new Error("effect_update_depth_exceeded")}function Qn(t){throw new Error("props_invalid_value")}function Xn(){throw new Error("state_descriptors_fixed")}function ta(){throw new Error("state_prototype_fixed")}function ea(){throw new Error("state_unsafe_local_read")}function ra(){throw new Error("state_unsafe_mutation")}let ce=!1;function na(){ce=!0}function ht(t){return{f:0,v:t,reactions:null,equals:Ur,version:0}}function lr(t,e=!1){var a;const n=ht(t);return e||(n.equals=Er),ce&&W!==null&&W.l!==null&&((a=W.l).s??(a.s=[])).push(n),n}function Y(t,e=!1){return aa(lr(t,e))}function aa(t){return M!==null&&M.f&vt&&(Pt===null?Ea([t]):Pt.push(t)),t}function bt(t,e){return b(t,Ft(()=>u(t))),e}function b(t,e){return M!==null&&mr()&&M.f&(vt|kr)&&(Pt===null||!Pt.includes(t))&&ra(),zr(t,e)}function zr(t,e){return t.equals(e)||(t.v=e,t.version=mn(),Zr(t,qt),mr()&&q!==null&&q.f&ot&&!(q.f&gt)&&(at!==null&&at.includes(t)?(yt(q,qt),gr(q)):Mt===null?za([t]):Mt.push(t))),e}function Zr(t,e){var n=t.reactions;if(n!==null)for(var a=mr(),r=n.length,i=0;i<r;i++){var s=n[i],c=s.f;c&qt||!a&&s===q||(yt(s,e),c&(ot|Jt)&&(c&vt?Zr(s,ue):gr(s)))}}const Pr=1,Tr=2,Vr=4,oa=8,ia=16,sa=1,la=2,ua=4,ca=8,da=16,pa=1,fa=2,dt=Symbol();let Yr=!1;function de(t,e=null,n){if(typeof t!="object"||t===null||Rt in t)return t;const a=ar(t);if(a!==Fn&&a!==Wn)return t;var r=new Map,i=Yt(t),s=ht(0);i&&r.set("length",ht(t.length));var c;return new Proxy(t,{defineProperty(l,p,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Xn();var v=r.get(p);return v===void 0?(v=ht(_.value),r.set(p,v)):b(v,de(_.value,c)),!0},deleteProperty(l,p){var _=r.get(p);if(_===void 0)p in l&&r.set(p,ht(dt));else{if(i&&typeof p=="string"){var v=r.get("length"),f=Number(p);Number.isInteger(f)&&f<v.v&&b(v,f)}b(_,dt),Jr(s)}return!0},get(l,p,_){var g;if(p===Rt)return t;var v=r.get(p),f=p in l;if(v===void 0&&(!f||(g=le(l,p))!=null&&g.writable)&&(v=ht(de(f?l[p]:dt,c)),r.set(p,v)),v!==void 0){var m=u(v);return m===dt?void 0:m}return Reflect.get(l,p,_)},getOwnPropertyDescriptor(l,p){var _=Reflect.getOwnPropertyDescriptor(l,p);if(_&&"value"in _){var v=r.get(p);v&&(_.value=u(v))}else if(_===void 0){var f=r.get(p),m=f==null?void 0:f.v;if(f!==void 0&&m!==dt)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return _},has(l,p){var m;if(p===Rt)return!0;var _=r.get(p),v=_!==void 0&&_.v!==dt||Reflect.has(l,p);if(_!==void 0||q!==null&&(!v||(m=le(l,p))!=null&&m.writable)){_===void 0&&(_=ht(v?de(l[p],c):dt),r.set(p,_));var f=u(_);if(f===dt)return!1}return v},set(l,p,_,v){var S;var f=r.get(p),m=p in l;if(i&&p==="length")for(var g=_;g<f.v;g+=1){var k=r.get(g+"");k!==void 0?b(k,dt):g in l&&(k=ht(dt),r.set(g+"",k))}f===void 0?(!m||(S=le(l,p))!=null&&S.writable)&&(f=ht(void 0),b(f,de(_,c)),r.set(p,f)):(m=f.v!==dt,b(f,de(_,c)));var h=Reflect.getOwnPropertyDescriptor(l,p);if(h!=null&&h.set&&h.set.call(v,_),!m){if(i&&typeof p=="string"){var z=r.get("length"),R=Number(p);Number.isInteger(R)&&R>=z.v&&b(z,R+1)}Jr(s)}return!0},ownKeys(l){u(s);var p=Reflect.ownKeys(l).filter(f=>{var m=r.get(f);return m===void 0||m.v!==dt});for(var[_,v]of r)v.v!==dt&&!(_ in l)&&p.push(_);return p},setPrototypeOf(){ta()}})}function Jr(t,e=1){b(t,t.v+e)}function Qr(t){return t!==null&&typeof t=="object"&&Rt in t?t[Rt]:t}function Xr(t,e){return Object.is(Qr(t),Qr(e))}var tn,en,rn;function _a(){if(tn===void 0){tn=window;var t=Element.prototype,e=Node.prototype;en=le(e,"firstChild").get,rn=le(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function ur(t=""){return document.createTextNode(t)}function Le(t){return en.call(t)}function cr(t){return rn.call(t)}function o(t,e){return Le(t)}function Ot(t,e){{var n=Le(t);return n instanceof Comment&&n.data===""?cr(n):n}}function d(t,e=1,n=!1){let a=t;for(;e--;)a=cr(a);return a}function va(t){t.textContent=""}function Fe(t){var e=vt|qt;q===null?e|=Jt:q.f|=Gr;var n=M!==null&&M.f&vt?M:null;const a={children:null,ctx:W,deps:null,equals:Ur,f:e,fn:t,reactions:null,v:null,version:0,parent:n??q};return n!==null&&(n.children??(n.children=[])).push(a),a}function ha(t){const e=Fe(t);return e.equals=Er,e}function nn(t){var e=t.children;if(e!==null){t.children=null;for(var n=0;n<e.length;n+=1){var a=e[n];a.f&vt?Ar(a):Nt(a)}}}function ma(t){for(var e=t.parent;e!==null;){if(!(e.f&vt))return e;e=e.parent}return null}function an(t){var e,n=q;zt(ma(t));try{nn(t),e=gn(t)}finally{zt(n)}return e}function on(t){var e=an(t),n=(ve||t.f&Jt)&&t.deps!==null?ue:ot;yt(t,n),t.equals(e)||(t.v=e,t.version=mn())}function Ar(t){nn(t),He(t,0),yt(t,Me),t.v=t.children=t.deps=t.ctx=t.reactions=null}function sn(t){q===null&&M===null&&Yn(),M!==null&&M.f&Jt&&Vn(),qr&&Zn()}function ga(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function pe(t,e,n,a=!0){var r=(t&$e)!==0,i=q,s={ctx:W,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|qt,first:null,fn:e,last:null,next:null,parent:r?null:i,prev:null,teardown:null,transitions:null,version:0};if(n){var c=_e;try{_n(!0),Ge(s),s.f|=Hn}catch(_){throw Nt(s),_}finally{_n(c)}}else e!==null&&gr(s);var l=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Gr)===0;if(!l&&!r&&a&&(i!==null&&ga(s,i),M!==null&&M.f&vt)){var p=M;(p.children??(p.children=[])).push(s)}return s}function Sr(t){const e=pe(Ne,null,!1);return yt(e,ot),e.teardown=t,e}function Ir(t){sn();var e=q!==null&&(q.f&gt)!==0&&W!==null&&!W.m;if(e){var n=W;(n.e??(n.e=[])).push({fn:t,effect:q,reaction:M})}else{var a=dr(t);return a}}function ba(t){return sn(),fe(t)}function ya(t){const e=pe($e,t,!0);return()=>{Nt(e)}}function dr(t){return pe(Br,t,!1)}function Dt(t,e){var n=W,a={effect:null,ran:!1};n.l.r1.push(a),a.effect=fe(()=>{t(),!a.ran&&(a.ran=!0,b(n.l.r2,!0),Ft(e))})}function pr(){var t=W;fe(()=>{if(u(t.l.r2)){for(var e of t.l.r1){var n=e.effect;n.f&ot&&yt(n,ue),he(n)&&Ge(n),e.ran=!1}t.l.r2.v=!1}})}function fe(t){return pe(Ne,t,!0)}function y(t){return We(t)}function We(t,e=0){return pe(Ne|kr|e,t,!0)}function Qt(t,e=!0){return pe(Ne|gt,t,!0,e)}function ln(t){var e=t.teardown;if(e!==null){const n=qr,a=M;vn(!0),$t(null);try{e.call(null)}finally{vn(n),$t(a)}}}function un(t){var e=t.deriveds;if(e!==null){t.deriveds=null;for(var n=0;n<e.length;n+=1)Ar(e[n])}}function cn(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var a=n.next;Nt(n,e),n=a}}function wa(t){for(var e=t.first;e!==null;){var n=e.next;e.f&gt||Nt(e),e=n}}function Nt(t,e=!0){var n=!1;if((e||t.f&Gn)&&t.nodes_start!==null){for(var a=t.nodes_start,r=t.nodes_end;a!==null;){var i=a===r?null:cr(a);a.remove(),a=i}n=!0}cn(t,e&&!n),un(t),He(t,0),yt(t,Me);var s=t.transitions;if(s!==null)for(const l of s)l.stop();ln(t);var c=t.parent;c!==null&&c.first!==null&&dn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.parent=t.fn=t.nodes_start=t.nodes_end=null}function dn(t){var e=t.parent,n=t.prev,a=t.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=n))}function fr(t,e){var n=[];Or(t,n,!0),pn(n,()=>{Nt(t),e&&e()})}function pn(t,e){var n=t.length;if(n>0){var a=()=>--n||e();for(var r of t)r.out(a)}else e()}function Or(t,e,n){if(!(t.f&Et)){if(t.f^=Et,t.transitions!==null)for(const s of t.transitions)(s.is_global||n)&&e.push(s);for(var a=t.first;a!==null;){var r=a.next,i=(a.f&sr)!==0||(a.f&gt)!==0;Or(a,e,i?n:!1),a=r}}}function _r(t){fn(t,!0)}function fn(t,e){if(t.f&Et){he(t)&&Ge(t),t.f^=Et;for(var n=t.first;n!==null;){var a=n.next,r=(n.f&sr)!==0||(n.f&gt)!==0;fn(n,r?e:!1),n=a}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let Cr=!1,jr=[];function xa(){Cr=!1;const t=jr.slice();jr=[],or(t)}function vr(t){Cr||(Cr=!0,queueMicrotask(xa)),jr.push(t)}function ka(t){throw new Error("lifecycle_outside_component")}let hr=!1,_e=!1,qr=!1;function _n(t){_e=t}function vn(t){qr=t}let Rr=[],Be=0,Vo=[],M=null;function $t(t){M=t}let q=null;function zt(t){q=t}let Pt=null;function Ea(t){Pt=t}let at=null,pt=0,Mt=null;function za(t){Mt=t}let hn=0,ve=!1,Lt=null,W=null;function mn(){return++hn}function mr(){return!ce||W!==null&&W.l===null}function he(t){var s,c;var e=t.f;if(e&qt)return!0;if(e&ue){var n=t.deps,a=(e&Jt)!==0;if(n!==null){var r;if(e&ir){for(r=0;r<n.length;r++)((s=n[r]).reactions??(s.reactions=[])).push(t);t.f^=ir}for(r=0;r<n.length;r++){var i=n[r];if(he(i)&&on(i),a&&q!==null&&!ve&&!((c=i==null?void 0:i.reactions)!=null&&c.includes(t))&&(i.reactions??(i.reactions=[])).push(t),i.version>t.version)return!0}}a||yt(t,ot)}return!1}function Pa(t,e,n){throw t}function gn(t){var f;var e=at,n=pt,a=Mt,r=M,i=ve,s=Pt,c=W,l=t.f;at=null,pt=0,Mt=null,M=l&(gt|$e)?null:t,ve=!_e&&(l&Jt)!==0,Pt=null,W=t.ctx;try{var p=(0,t.fn)(),_=t.deps;if(at!==null){var v;if(He(t,pt),_!==null&&pt>0)for(_.length=pt+at.length,v=0;v<at.length;v++)_[pt+v]=at[v];else t.deps=_=at;if(!ve)for(v=pt;v<_.length;v++)((f=_[v]).reactions??(f.reactions=[])).push(t)}else _!==null&&pt<_.length&&(He(t,pt),_.length=pt);return p}finally{at=e,pt=n,Mt=a,M=r,ve=i,Pt=s,W=c}}function Ta(t,e){let n=e.reactions;if(n!==null){var a=n.indexOf(t);if(a!==-1){var r=n.length-1;r===0?n=e.reactions=null:(n[a]=n[r],n.pop())}}n===null&&e.f&vt&&(at===null||!at.includes(e))&&(yt(e,ue),e.f&(Jt|ir)||(e.f^=ir),He(e,0))}function He(t,e){var n=t.deps;if(n!==null)for(var a=e;a<n.length;a++)Ta(t,n[a])}function Ge(t){var e=t.f;if(!(e&Me)){yt(t,ot);var n=q;q=t;try{e&kr?wa(t):cn(t),un(t),ln(t);var a=gn(t);t.teardown=typeof a=="function"?a:null,t.version=hn}catch(r){Pa(r)}finally{q=n}}}function Aa(){Be>1e3&&(Be=0,Jn()),Be++}function Sa(t){var e=t.length;if(e!==0){Aa();var n=_e;_e=!0;try{for(var a=0;a<e;a++){var r=t[a];r.f&ot||(r.f^=ot);var i=[];bn(r,i),Ia(i)}}finally{_e=n}}}function Ia(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var a=t[n];!(a.f&(Me|Et))&&he(a)&&(Ge(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?dn(a):a.fn=null))}}function Oa(){if(hr=!1,Be>1001)return;const t=Rr;Rr=[],Sa(t),hr||(Be=0)}function gr(t){hr||(hr=!0,queueMicrotask(Oa));for(var e=t;e.parent!==null;){e=e.parent;var n=e.f;if(n&($e|gt)){if(!(n&ot))return;e.f^=ot}}Rr.push(e)}function bn(t,e){var n=t.first,a=[];t:for(;n!==null;){var r=n.f,i=(r&gt)!==0,s=i&&(r&ot)!==0;if(!s&&!(r&Et))if(r&Ne){i?n.f^=ot:he(n)&&Ge(n);var c=n.first;if(c!==null){n=c;continue}}else r&Br&&a.push(n);var l=n.next;if(l===null){let v=n.parent;for(;v!==null;){if(t===v)break t;var p=v.next;if(p!==null){n=p;continue t}v=v.parent}}n=l}for(var _=0;_<a.length;_++)c=a[_],e.push(c),bn(c,e)}function u(t){var _;var e=t.f,n=(e&vt)!==0;if(n&&e&Me){var a=an(t);return Ar(t),a}if(Lt!==null&&Lt.add(t),M!==null){Pt!==null&&Pt.includes(t)&&ea();var r=M.deps;at===null&&r!==null&&r[pt]===t?pt++:at===null?at=[t]:at.push(t),Mt!==null&&q!==null&&q.f&ot&&!(q.f&gt)&&Mt.includes(t)&&(yt(q,qt),gr(q))}else if(n&&t.deps===null)for(var i=t,s=i.parent,c=i;s!==null;)if(s.f&vt){var l=s;c=l,s=l.parent}else{var p=s;(_=p.deriveds)!=null&&_.includes(c)||(p.deriveds??(p.deriveds=[])).push(c);break}return n&&(i=t,he(i)&&on(i)),t.v}function it(t){var e=Lt;Lt=new Set;var n=Lt,a;try{if(Ft(t),e!==null)for(a of Lt)e.add(a)}finally{Lt=e}for(a of n)if(a.f&Hr)for(const r of a.deps||[])r.f&vt||bt(r,null);else bt(a,null)}function Ft(t){const e=M;try{return M=null,t()}finally{M=e}}const Ca=~(qt|ue|ot);function yt(t,e){t.f=t.f&Ca|e}function Wt(t,e=!1,n){W={p:W,c:null,e:null,m:!1,s:t,x:null,l:null},ce&&!e&&(W.l={s:null,u:null,r1:[],r2:ht(!1)})}function Bt(t){const e=W;if(e!==null){const s=e.e;if(s!==null){var n=q,a=M;e.e=null;try{for(var r=0;r<s.length;r++){var i=s[r];zt(i.effect),$t(i.reaction),dr(i.fn)}}finally{zt(n),$t(a)}}W=e.p,e.m=!0}return{}}function Xt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Rt in t)Dr(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Rt in n&&Dr(n)}}}function Dr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let a in t)try{Dr(t[a],e)}catch{}const n=ar(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const a=Wr(n);for(let r in a){const i=a[r].get;if(i)try{i.call(t)}catch{}}}}}let yn=!1;function ja(){yn||(yn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function wn(t){var e=M,n=q;$t(null),zt(null);try{return t()}finally{$t(e),zt(n)}}function Nr(t,e,n,a=n){t.addEventListener(e,()=>wn(n));const r=t.__on_r;r?t.__on_r=()=>{r(),a()}:t.__on_r=a,ja()}const qa=new Set,xn=new Set;function Ra(t,e,n,a){function r(i){if(a.capture||Ue.call(e,i),!i.cancelBubble)return wn(()=>n.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?vr(()=>{e.addEventListener(t,r,a)}):e.addEventListener(t,r,a),r}function J(t,e,n,a,r){var i={capture:a,passive:r},s=Ra(t,e,n,i);(e===document.body||e===window||e===document)&&Sr(()=>{e.removeEventListener(t,s,i)})}function Ue(t){var R;var e=this,n=e.ownerDocument,a=t.type,r=((R=t.composedPath)==null?void 0:R.call(t))||[],i=r[0]||t.target,s=0,c=t.__root;if(c){var l=r.indexOf(c);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var p=r.indexOf(e);if(p===-1)return;l<=p&&(s=l)}if(i=r[s]||t.target,i!==e){Ln(t,"currentTarget",{configurable:!0,get(){return i||n}});var _=M,v=q;$t(null),zt(null);try{for(var f,m=[];i!==null;){var g=i.assignedSlot||i.parentNode||i.host||null;try{var k=i["__"+a];if(k!==void 0&&!i.disabled)if(Yt(k)){var[h,...z]=k;h.apply(i,[t,...z])}else k.call(i,t)}catch(S){f?m.push(S):f=S}if(t.cancelBubble||g===e||g===null)break;i=g}if(f){for(let S of m)queueMicrotask(()=>{throw S});throw f}}finally{t.__root=e,delete t.currentTarget,$t(_),zt(v)}}}function kn(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Ke(t,e){var n=q;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Q(t,e){var n=(e&pa)!==0,a=(e&fa)!==0,r,i=!t.startsWith("<!>");return()=>{r===void 0&&(r=kn(i?t:"<!>"+t),n||(r=Le(r)));var s=a?document.importNode(r,!0):r.cloneNode(!0);if(n){var c=Le(s),l=s.lastChild;Ke(c,l)}else Ke(s,s);return s}}function Ht(t=""){{var e=ur(t+"");return Ke(e,e),e}}function En(){var t=document.createDocumentFragment(),e=document.createComment(""),n=ur();return t.append(e,n),Ke(e,n),t}function D(t,e){t!==null&&t.before(e)}const Da=["touchstart","touchmove"];function Na(t){return Da.includes(t)}function x(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n==null?"":n+"")}function $a(t,e){return Ma(t,e)}const me=new Map;function Ma(t,{target:e,anchor:n,props:a={},events:r,context:i,intro:s=!0}){_a();var c=new Set,l=v=>{for(var f=0;f<v.length;f++){var m=v[f];if(!c.has(m)){c.add(m);var g=Na(m);e.addEventListener(m,Ue,{passive:g});var k=me.get(m);k===void 0?(document.addEventListener(m,Ue,{passive:g}),me.set(m,1)):me.set(m,k+1)}}};l(xr(qa)),xn.add(l);var p=void 0,_=ya(()=>{var v=n??e.appendChild(ur());return Qt(()=>{if(i){Wt({});var f=W;f.c=i}r&&(a.$$events=r),p=t(v,a)||{},i&&Bt()}),()=>{var g;for(var f of c){e.removeEventListener(f,Ue);var m=me.get(f);--m===0?(document.removeEventListener(f,Ue),me.delete(f)):me.set(f,m)}xn.delete(l),zn.delete(p),v!==n&&((g=v.parentNode)==null||g.removeChild(v))}});return zn.set(p,_),p}let zn=new WeakMap;function ft(t,e,n,a=null,r=!1){var i=t,s=null,c=null,l=null,p=r?sr:0;We(()=>{l!==(l=!!e())&&(l?(s?_r(s):s=Qt(()=>n(i)),c&&fr(c,()=>{c=null})):(c?_r(c):a&&(c=Qt(()=>a(i))),s&&fr(s,()=>{s=null})))},p)}function Ze(t,e){return e}function La(t,e,n,a){for(var r=[],i=e.length,s=0;s<i;s++)Or(e[s].e,r,!0);var c=i>0&&r.length===0&&n!==null;if(c){var l=n.parentNode;va(l),l.append(n),a.clear(),Gt(t,e[0].prev,e[i-1].next)}pn(r,()=>{for(var p=0;p<i;p++){var _=e[p];c||(a.delete(_.k),Gt(t,_.prev,_.next)),Nt(_.e,!c)}})}function Ve(t,e,n,a,r,i=null){var s=t,c={flags:e,items:new Map,first:null},l=(e&Vr)!==0;if(l){var p=t;s=p.appendChild(ur())}var _=null,v=!1;We(()=>{var f=n(),m=Yt(f)?f:f==null?[]:xr(f),g=m.length;if(!(v&&g===0)){v=g===0;{var k=M;Fa(m,c,s,r,e,(k.f&Et)!==0,a)}i!==null&&(g===0?_?_r(_):_=Qt(()=>i(s)):_!==null&&fr(_,()=>{_=null})),n()}})}function Fa(t,e,n,a,r,i,s){var K,_t,wt,mt;var c=(r&oa)!==0,l=(r&(Pr|Tr))!==0,p=t.length,_=e.items,v=e.first,f=v,m,g=null,k,h=[],z=[],R,S,E,T;if(c)for(T=0;T<p;T+=1)R=t[T],S=s(R,T),E=_.get(S),E!==void 0&&((K=E.a)==null||K.measure(),(k??(k=new Set)).add(E));for(T=0;T<p;T+=1){if(R=t[T],S=s(R,T),E=_.get(S),E===void 0){var U=f?f.e.nodes_start:n;g=Ba(U,e,g,g===null?e.first:g.next,R,S,T,a,r),_.set(S,g),h=[],z=[],f=g.next;continue}if(l&&Wa(E,R,T,r),E.e.f&Et&&(_r(E.e),c&&((_t=E.a)==null||_t.unfix(),(k??(k=new Set)).delete(E))),E!==f){if(m!==void 0&&m.has(E)){if(h.length<z.length){var B=z[0],A;g=B.prev;var H=h[0],V=h[h.length-1];for(A=0;A<h.length;A+=1)Pn(h[A],B,n);for(A=0;A<z.length;A+=1)m.delete(z[A]);Gt(e,H.prev,V.next),Gt(e,g,H),Gt(e,V,B),f=B,g=V,T-=1,h=[],z=[]}else m.delete(E),Pn(E,f,n),Gt(e,E.prev,E.next),Gt(e,E,g===null?e.first:g.next),Gt(e,g,E),g=E;continue}for(h=[],z=[];f!==null&&f.k!==S;)(i||!(f.e.f&Et))&&(m??(m=new Set)).add(f),z.push(f),f=f.next;if(f===null)continue;E=f}h.push(E),g=E,f=E.next}if(f!==null||m!==void 0){for(var et=m===void 0?[]:xr(m);f!==null;)(i||!(f.e.f&Et))&&et.push(f),f=f.next;var st=et.length;if(st>0){var lt=r&Vr&&p===0?n:null;if(c){for(T=0;T<st;T+=1)(wt=et[T].a)==null||wt.measure();for(T=0;T<st;T+=1)(mt=et[T].a)==null||mt.fix()}La(e,et,lt,_)}}c&&vr(()=>{var Tt;if(k!==void 0)for(E of k)(Tt=E.a)==null||Tt.apply()}),q.first=e.first&&e.first.e,q.last=g&&g.e}function Wa(t,e,n,a){a&Pr&&zr(t.v,e),a&Tr?zr(t.i,n):t.i=n}function Ba(t,e,n,a,r,i,s,c,l){var p=(l&Pr)!==0,_=(l&ia)===0,v=p?_?lr(r):ht(r):r,f=l&Tr?ht(s):s,m={i:f,v,k:i,a:null,e:null,prev:n,next:a};try{return m.e=Qt(()=>c(t,v,f),Yr),m.e.prev=n&&n.e,m.e.next=a&&a.e,n===null?e.first=m:(n.next=m,n.e.next=m.e),a!==null&&(a.prev=m,a.e.prev=m.e),m}finally{}}function Pn(t,e,n){for(var a=t.next?t.next.e.nodes_start:n,r=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==a;){var s=cr(i);r.before(i),i=s}}function Gt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Tn(t,e,n,a,r){var i=t,s="",c;We(()=>{s!==(s=e()??"")&&(c!==void 0&&(Nt(c),c=void 0),s!==""&&(c=Qt(()=>{var l=s+"",p=kn(l);Ke(Le(p),p.lastChild),i.before(p)})))})}function Ha(t,e,n){var a=t,r,i;We(()=>{r!==(r=e())&&(i&&(fr(i),i=null),r&&(i=Qt(()=>n(a,r))))},sr)}function Ga(t,e){var n=t.__attributes??(t.__attributes={});n.value===(n.value=e)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e)}function Ua(t,e){var n=t.__attributes??(t.__attributes={});n.checked!==(n.checked=e)&&(t.checked=e)}function $r(t,e,n,a){var r=t.__attributes??(t.__attributes={});r[e]!==(r[e]=n)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Kn]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Ka(t).includes(e)?t[e]=n:t.setAttribute(e,n))}var An=new Map;function Ka(t){var e=An.get(t.nodeName);if(e)return e;An.set(t.nodeName,e=[]);for(var n,a=ar(t),r=Element.prototype;r!==a;){n=Wr(a);for(var i in n)n[i].set&&e.push(i);a=ar(a)}return e}function ge(t,e){var n=t.__className,a=Za(e);(n!==a||Yr)&&(e==null?t.removeAttribute("class"):t.className=a,t.__className=a)}function Za(t){return t??""}function I(t,e,n=e){var a=mr();Nr(t,"input",()=>{var r=Sn(t)?In(t.value):t.value;n(r),a&&r!==(r=e())&&(t.value=r??"")}),fe(()=>{var r=e();Sn(t)&&r===In(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}const Mr=new Set;function Va(t,e,n,a,r=a){var i=n.getAttribute("type")==="checkbox",s=t;if(e!==null)for(var c of e)s=s[c]??(s[c]=[]);s.push(n),Nr(n,"change",()=>{var l=n.__value;i&&(l=Ya(s,l,n.checked)),r(l)},()=>r(i?[]:null)),fe(()=>{var l=a();i?(l=l||[],n.checked=l.includes(n.__value)):n.checked=Xr(n.__value,l)}),Sr(()=>{var l=s.indexOf(n);l!==-1&&s.splice(l,1)}),Mr.has(s)||(Mr.add(s),vr(()=>{s.sort((l,p)=>l.compareDocumentPosition(p)===4?-1:1),Mr.delete(s)})),vr(()=>{})}function Ya(t,e,n){for(var a=new Set,r=0;r<t.length;r+=1)t[r].checked&&a.add(t[r].__value);return n||a.delete(e),Array.from(a)}function Sn(t){var e=t.type;return e==="number"||e==="range"}function In(t){return t===""?null:+t}function On(t,e,n){if(t.multiple)return Qa(t,e);for(var a of t.options){var r=Ye(a);if(Xr(r,e)){a.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ja(t,e){dr(()=>{var n=new MutationObserver(()=>{var a=t.__value;On(t,a)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function Lr(t,e,n=e){var a=!0;Nr(t,"change",()=>{var r;if(t.multiple)r=[].map.call(t.querySelectorAll(":checked"),Ye);else{var i=t.querySelector(":checked");r=i&&Ye(i)}n(r)}),dr(()=>{var r=e();if(On(t,r,a),a&&r===void 0){var i=t.querySelector(":checked");i!==null&&(r=Ye(i),n(r))}t.__value=r,a=!1}),Ja(t)}function Qa(t,e){for(var n of t.options)n.selected=~e.indexOf(Ye(n))}function Ye(t){return"__value"in t?t.__value:t.value}function Je(t,e,n,a=n){e.addEventListener("input",()=>{a(e[t])}),fe(()=>{var r=n();if(e[t]!==r)if(r==null){var i=e[t];a(i)}else e[t]=r+""})}function te(t=!1){const e=W,n=e.l.u;if(!n)return;let a=()=>Xt(e.s);if(t){let r=0,i={};const s=Fe(()=>{let c=!1;const l=e.s;for(const p in l)l[p]!==i[p]&&(i[p]=l[p],c=!0);return c&&r++,r});a=()=>u(s)}n.b.length&&ba(()=>{Cn(e,a),or(n.b)}),Ir(()=>{const r=Ft(()=>n.m.map(Bn));return()=>{for(const i of r)typeof i=="function"&&i()}}),n.a.length&&Ir(()=>{Cn(e,a),or(n.a)})}function Cn(t,e){if(t.l.s)for(const n of t.l.s)u(n);e()}function jn(t,e,n){if(t==null)return e(void 0),n&&n(void 0),jt;const a=Ft(()=>t.subscribe(e,n));return a.unsubscribe?()=>a.unsubscribe():a}let br=!1;function ee(t,e,n){const a=n[e]??(n[e]={store:null,source:lr(void 0),unsubscribe:jt});if(a.store!==t)if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=jt;else{var r=!0;a.unsubscribe=jn(t,i=>{r?a.source.v=i:b(a.source,i)}),r=!1}return u(a.source)}function Xa(t,e){return t.set(e),e}function re(){const t={};return Sr(()=>{for(var e in t)t[e].unsubscribe()}),t}function to(t){var e=br;try{return br=!1,[t(),br]}finally{br=e}}function qn(t){for(var e=q,n=q;e!==null&&!(e.f&(gt|$e));)e=e.parent;try{return zt(e),t()}finally{zt(n)}}function Ut(t,e,n,a){var B;var r=(n&sa)!==0,i=!ce||(n&la)!==0,s=(n&ca)!==0,c=(n&da)!==0,l=!1,p;s?[p,l]=to(()=>t[e]):p=t[e];var _=Rt in t||Un in t,v=((B=le(t,e))==null?void 0:B.set)??(_&&s&&e in t?A=>t[e]=A:void 0),f=a,m=!0,g=!1,k=()=>(g=!0,m&&(m=!1,c?f=Ft(a):f=a),f);p===void 0&&a!==void 0&&(v&&i&&Qn(),p=k(),v&&v(p));var h;if(i)h=()=>{var A=t[e];return A===void 0?k():(m=!0,g=!1,A)};else{var z=qn(()=>(r?Fe:ha)(()=>t[e]));z.f|=Hr,h=()=>{var A=u(z);return A!==void 0&&(f=void 0),A===void 0?f:A}}if(!(n&ua))return h;if(v){var R=t.$$legacy;return function(A,H){return arguments.length>0?((!i||!H||R||l)&&v(H?h():A),A):h()}}var S=!1,E=!1,T=lr(p),U=qn(()=>Fe(()=>{var A=h(),H=u(T);return S?(S=!1,E=!0,H):(E=!1,T.v=A)}));return r||(U.equals=Er),function(A,H){if(Lt!==null&&(S=E,h(),u(T)),arguments.length>0){const V=H?u(U):i&&s?de(A):A;return U.equals(V)||(S=!0,b(T,V),g&&f!==void 0&&(f=V),Ft(()=>u(U))),A}return u(U)}}function eo(t){W===null&&ka(),ce&&W.l!==null?ro(W).m.push(t):Ir(()=>{const e=Ft(t);if(typeof e=="function")return e})}function ro(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const no="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(no),na();const be=[];function ao(t,e){return{subscribe:Rn(t,e).subscribe}}function Rn(t,e=jt){let n=null;const a=new Set;function r(c){if(Kr(t,c)&&(t=c,n)){const l=!be.length;for(const p of a)p[1](),be.push(p,t);if(l){for(let p=0;p<be.length;p+=2)be[p][0](be[p+1]);be.length=0}}}function i(c){r(c(t))}function s(c,l=jt){const p=[c,l];return a.add(p),a.size===1&&(n=e(r,i)||jt),c(t),()=>{a.delete(p),a.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:s}}function oo(t,e,n){const a=!Array.isArray(t),r=a?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return ao(n,(s,c)=>{let l=!1;const p=[];let _=0,v=jt;const f=()=>{if(_)return;v();const g=e(a?p[0]:p,s,c);i?s(g):v=typeof g=="function"?g:jt},m=r.map((g,k)=>jn(g,h=>{p[k]=h,_&=~(1<<k),l&&f()},()=>{_|=1<<k}));return l=!0,f(),function(){or(m),v(),l=!1}})}const io={en:{"msg.settings_saved":"Settings have been saved","msg.network_error":"Network error","msg.server_error":"Server error","msg.hide_message":"Hide message.","msg.embedding_done":"The embedding has been done successfully!","msg.no_new_embed":"No new descriptions to embed","button.save":"Save settings","button.save_process":"Saving Settings...","apimodel.label":"API","apimodel.title":"API Settings","apimodel.api_key":"ChatGPT API Key","apimodel.model_selection":"ChatGPT model selection","apimodel.embed_product":"Embed product descriptions","apimodel.btn_embed_product":"Run embedding product descriptions","apimodel.description":'<p class="chat-text">This plugin requires an API key from OpenAI to function. You can obtain the API key by registering at <a href="https://platform.openai.com/account/api-keys" target="_blank">https://platform.openai.com/account/api-keys</a>.</p>       <p>For more information about ChatGPT models and their capabilities, visit <a href="https://platform.openai.com/docs/models/overview" taget="_blank">https://platform.openai.com/docs/models/overview</a>.</p>       <p>Enter your ChatGPT API key below and select the OpenAI model.</p>',"apimodel.temperature":"Temperature","settings.label":"Chatbot","settings.title":"Bot Settings","settings.description":"Configure the bot's settings, including initial status, greeting and system prompt.","settings.title_widget":"Bot Name","settings.start_status":"Startup Status","settings.open":"Open","settings.close":"Close","settings.on":"On","settings.off":"Off","settings.attaching_image_files":"Attaching image files","settings.initial_welcome":"Initial Welcome","settings.system_prompt":"System Prompt","settings.chatbot_available_sites":"Chatbot available for sites","appearance.label":"Appearance","appearance.title":"Appearance Settings","appearance.color_settings":"Color Settings","appearance.widget_settings":"Widget Window","appearance.toggler_button_settings":"Toggler Button","tools.label":"Tools","tools.title":"Tools","tools.instructions":"Instructions","tools.examples":"Examples","tools.parameter_descriptions":"Parameter descriptions","tools.product_list.system_prompt":"<p>A tool that searches for products based on a query.</p>","tools.show_example":"Show Example","tools.hide_example":"Hide Example","tools.header_section":"Response header section","tools.list_section":"Product list section","tools.footer_section":"Response footer section","tools.show_parameter_descriptions":"Show Parameter Descriptions","tools.hide_parameter_descriptions":"Hide Parameter_Descriptions","tools.add_new_example":"Add New Example","tools.remove_example":"Remove Example","supports.label":"Supports","supports.title":"Supports"},pl:{"msg.settings_saved":"Ustawienia zostały zapisane","msg.network_error":"Błąd sieciowy","msg.server_error":"Błąd serwera","msg.hide_message":"Ukryj komunikat.","msg.embedding_done":"Osadzanie zostało pomyślnie wykonane!","msg.no_new_embed":"Nie ma nowych opisów do osadzenia!","button.save":"Zapisz ustawienia","button.save_process":"Zapisywanie ustawień...","apimodel.label":"API","apimodel.title":"Ustawienia API","apimodel.api_key":"ChatGPT API Key","apimodel.model_selection":"Wybór modelu ChatGPT","apimodel.embed_product":"Osadź opisy produktów","apimodel.btn_embed_product":"Uruchom osadzanie opisów produktów","apimodel.description":'<p>Wtyczka Zoltiq Chatbot wymaga klucza API od OpenAI do działania. Klucz API można uzyskać, rejestrując się na stronie <a href="https://platform.openai.com/account/api-keys" target="_blank">https://platform.openai.com/account/api-keys</a>.</p>       <p>Więcej informacji o modelach ChatGPT i ich możliwościach można znaleźć na stronie  <a href="https://platform.openai.com/docs/models/overview" taget="_blank">https://platform.openai.com/docs/models/overview</a>.</p>       <p>Wprowadź swój klucz API ChatGPT poniżej i wybierz model OpenAI.</p>',"apimodel.temperature":"Temperatura","settings.label":"Chatbot","settings.title":"Ustawienia Bota","settings.description":"Skonfiguruj ustawienia bota, m.in. status początkowy, powitanie i prompt systemowy.","settings.title_widget":"Nazwa Bota","settings.start_status":"Status Startowy","settings.open":"Otwarty","settings.close":"Zamknięty","settings.on":"Włączone","settings.off":"Wyłączone","settings.attaching_image_files":"Załączanie plików graficznych","settings.initial_welcome":"Powitanie Początkowe","settings.system_prompt":"Prompt Systemowy","settings.chatbot_available_sites":"Chatbot dostępny dla stron","appearance.label":"Wygląd","appearance.title":"Ustawienia Wyglądu","appearance.color_settings":"Kolory","appearance.widget_settings":"Okno Widżetu","appearance.toggler_button_settings":"Przycisk Toggler","tools.label":"Narzędzia","tools.title":"Narzędzia","tools.instructions":"Instrukcje","tools.examples":"Przykłady","tools.parameter_descriptions":"Opisy parametrów","tools.product_list.system_prompt":"<p>Narzędzie wyszukujące produkty na podstawie zapytania.</p>","tools.show_example":"Pokaż Przykład","tools.hide_example":"Ukryj Przykład","tools.header_section":"Sekcja nagłówka odpowiedzi","tools.list_section":"Sekcja listy produktów","tools.footer_section":"Sekcja stopki odpowiedzi","tools.show_parameter_descriptions":"Pokaż Opisy Parametrów","tools.hide_parameter_descriptions":"Ukryj Opisy Parametrów","tools.add_new_example":"Dodaj Nowy Przykład","tools.remove_example":"Usuń Przykład","supports.label":"Wsparcie","supports.title":"Wsparcie"}},Fr=Rn("en");function so(t,e,n){if(!e)throw new Error("no key provided to $t()");if(!t)throw new Error(`no translation for key "${e}"`);let a=io[t][e];if(!a)throw new Error(`no translation found for ${t}.${e}`);return Object.keys(n).map(r=>{const i=new RegExp(`{{${r}}}`,"g");a=a.replace(i,n[r])}),a}const ye=oo(Fr,t=>(e,n={})=>so(t,e,n));var lo=Q('<div><p><strong> </strong></p> <button type="button" class="notice-dismiss"><span class="screen-reader-text"> </span></button></div>'),uo=Q('<div><div class="chat-text"><!></div> <form method="post"><table class="form-table" role="presentation"><tbody><tr><th scope="row">ChatGPT API Key</th><td><input type="password" name="api_key" class="regular-text"></td></tr><tr><th scope="row"> </th><td><select name="model_choice"><option>gpt-4o</option><option>gpt-4o-mini</option></select></td></tr><tr><th scope="row"> </th><td><input type="number" step="0.1" min="0.0" max="2.0" name="temperature" placeholder="1.0" inputmode="decimal" lang="en"></td></tr></tbody></table> <p class="submit"><button type="submit" name="submit" class="button button-primary"><!></button></p></form></div> <!>',1);function co(t,e){Wt(e,!1);const n=re(),a=()=>ee(ye,"$t",n);let r=Ut(e,"initData",12),i=Y(""),s=Y(!1),c=Y(!1),l={api_key:"",model_choice:"gpt-4o-mini",temperature:1};async function p(Z){Z.preventDefault(),b(i,""),b(c,!0),b(s,!1),delete r().pages;const rt={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",data:r(),security:r().nonce})};try{const nt=await fetch(`${window.ajaxurl}?action=update`,rt);if(!nt.ok)throw new Error("msg.network_error");if(!(await nt.json()).success)throw new Error(a()("msg.network_error"));b(i,a()("msg.settings_saved"))}catch(nt){b(s,!0),b(i,nt.message)}b(c,!1)}Dt(()=>Xt(r()),()=>{r(r()&&typeof r()=="object"&&Object.keys(r()).length>0?r():l)}),pr(),te();var _=uo(),v=Ot(_),f=o(v),m=o(f);Tn(m,()=>a()("apimodel.description"));var g=d(f,2),k=o(g),h=o(k),z=o(h),R=d(o(z)),S=o(R),E=d(z),T=o(E),U=o(T);y(()=>x(U,a()("apimodel.model_selection")));var B=d(T),A=o(B);y(()=>{r().model_choice,it(()=>{})});var H=o(A);H.value=(H.__value="gpt-4o")==null?"":"gpt-4o";var V=d(H);V.value=(V.__value="gpt-4o-mini")==null?"":"gpt-4o-mini";var et=d(E),st=o(et),lt=o(st);y(()=>x(lt,a()("apimodel.temperature")));var K=d(st),_t=o(K),wt=d(k,2),mt=o(wt),Tt=o(mt);ft(Tt,()=>u(c),Z=>{var rt=Ht();y(()=>x(rt,a()("button.save_process"))),D(Z,rt)},Z=>{var rt=Ht();y(()=>x(rt,a()("button.save"))),D(Z,rt)});var At=d(v,2);ft(At,()=>u(i),Z=>{var rt=lo(),nt=o(rt),Kt=o(nt),Ct=o(Kt),St=d(nt,2),Zt=o(St),ne=o(Zt);y(()=>x(ne,a()("msg.hide_message"))),y(()=>{ge(rt,`${(u(s)?"notice-error":"notice-success")??""} notice is-dismissible`),x(Ct,u(i))}),J("click",St,()=>b(i,"")),D(Z,rt)}),y(()=>mt.disabled=u(c)),I(S,()=>r().api_key,Z=>r(r().api_key=Z,!0)),Lr(A,()=>r().model_choice,Z=>r(r().model_choice=Z,!0)),I(_t,()=>r().temperature,Z=>r(r().temperature=Z,!0)),J("submit",g,p),D(t,_),Bt()}const po=`You are an assistant of an online store selling products.\r
\r
Politely greet each other, your job is to answer questions based on the documents, do not answer other questions outside the scope of the documents.\r
\r
Users will ask about products, about prices, about whether the product is available in the store, answer according to the documents.\r
\r
If a user is looking for a product or wants to know more about a product, always search the database. Names of products searched always in the singular. \r
\r
If a user asks for product details do a database search again and answer in detail.\r
\r
Always inform the user if you have not found the answer in the documents - be honest.`;var fo=Q('<div><p><strong> </strong></p> <button type="button" class="notice-dismiss"><span class="screen-reader-text"> </span></button></div>'),_o=Q('<input type="checkbox"> <label> </label><br>',1),vo=Q('<div><p><strong> </strong></p> <button type="button" class="notice-dismiss"><span class="screen-reader-text"> </span></button></div>'),ho=Q('<!> <form method="post"><div class="chat-text"><p> </p></div> <table class="form-table" role="presentation"><tbody><tr><th scope="row"> </th><td><input type="text" name="title" class="regular-text"></td></tr><tr><th scope="row"> </th><td><select name="start_status"><option> </option><option> </option></select></td></tr><tr><th scope="row">Emoji</th><td><select name="emoji"><option> </option><option> </option></select></td></tr><tr><th scope="row"> </th><td><textarea name="initial_greeting" rows="3" cols="70"></textarea></td></tr><tr><th scope="row"> </th><td><textarea name="prompt_system" rows="10" cols="70"></textarea></td></tr><tr><th scope="row"> </th><td><div style="margin-top: 10px;"></div></td></tr></tbody></table> <p class="submit"><button type="submit" name="submit" class="button button-primary"><!></button></p></form> <!>',1);function mo(t,e){Wt(e,!1);const n=re(),a=()=>ee(ye,"$t",n);let r=Ut(e,"initData",12),i=Y(""),s=Y(!1),c=Y(!1),l={title:"ChatBot",start_status:"closed",emoji:"1",image_upload:"1",initial_greeting:"Hello👋 <br> What can I help you with today?",prompt_system:po,disable_chatbot_pages:[]};r(r().disable_chatbot_pages=r().disable_chatbot_pages&&typeof r().disable_chatbot_pages=="object"&&Object.keys(r().disable_chatbot_pages).length>0?r().disable_chatbot_pages:[],!0);async function p(j){j.preventDefault(),b(i,""),b(c,!0),b(s,!1),delete r().pages;const P={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",data:r(),security:r().nonce})};try{const $=await fetch(`${window.ajaxurl}?action=update`,P);if(!$.ok)throw new Error("msg.network_error");if(!(await $.json()).success)throw new Error(a()("msg.network_error"));b(i,a()("msg.settings_saved"))}catch($){b(s,!0),b(i,$.message)}b(c,!1)}function _(j){const P=j.target.name;j.target.checked?r(r().disable_chatbot_pages=r().disable_chatbot_pages.filter($=>$!==P),!0):r().disable_chatbot_pages.includes(P)||r(r().disable_chatbot_pages=[...r().disable_chatbot_pages,P],!0),console.log("Nieaktywne strony:",r().disable_chatbot_pages)}Dt(()=>Xt(r()),()=>{r(r()&&typeof r()=="object"&&Object.keys(r()).length>0?r():l)}),pr(),te();var v=ho(),f=Ot(v);ft(f,()=>u(i),j=>{var P=fo(),$=o(P),X=o($),ut=o(X),ct=d($,2),xt=o(ct),It=o(xt);y(()=>x(It,a()("msg.hide_message"))),y(()=>{ge(P,`${(u(s)?"notice-error":"notice-success")??""} notice is-dismissible`),x(ut,u(i))}),J("click",ct,()=>b(i,"")),D(j,P)});var m=d(f,2),g=o(m),k=o(g),h=o(k);y(()=>x(h,a()("settings.description")));var z=d(g,2),R=o(z),S=o(R),E=o(S),T=o(E);y(()=>x(T,a()("settings.title_widget")));var U=d(E),B=o(U),A=d(S),H=o(A),V=o(H);y(()=>x(V,a()("settings.start_status")));var et=d(H),st=o(et);y(()=>{r().start_status,it(()=>{a()})});var lt=o(st);lt.value=(lt.__value="open")==null?"":"open";var K=o(lt);y(()=>x(K,a()("settings.open")));var _t=d(lt);_t.value=(_t.__value="closed")==null?"":"closed";var wt=o(_t);y(()=>x(wt,a()("settings.close")));var mt=d(A),Tt=d(o(mt)),At=o(Tt);y(()=>{r().emoji,it(()=>{a()})});var Z=o(At);Z.value=(Z.__value="1")==null?"":"1";var rt=o(Z);y(()=>x(rt,a()("settings.on")));var nt=d(Z);nt.value=(nt.__value="0")==null?"":"0";var Kt=o(nt);y(()=>x(Kt,a()("settings.off")));var Ct=d(mt),St=o(Ct),Zt=o(St);y(()=>x(Zt,a()("settings.initial_welcome")));var ne=d(St),ae=o(ne),Vt=d(Ct),we=o(Vt),Qe=o(we);y(()=>x(Qe,a()("settings.system_prompt")));var Xe=d(we),xe=o(Xe),ke=d(Vt),Ee=o(ke),oe=o(Ee);y(()=>x(oe,a()("settings.chatbot_available_sites")));var L=d(Ee),O=o(L);Ve(O,5,()=>r().pages,Ze,(j,P)=>{var $=_o(),X=Ot($);y(()=>Ua(X,!r().disable_chatbot_pages.includes(u(P).slug)));var ut=d(X,2),ct=o(ut);y(()=>{$r(X,"id",`set-${u(P).slug??""}`),$r(X,"name",u(P).slug),$r(ut,"for",`set-${u(P).slug??""}`),x(ct,u(P).title?u(P).title:`${u(P).slug} (no name)`)}),J("change",X,_),D(j,$)});var N=d(z,2),C=o(N),G=o(C);ft(G,()=>u(c),j=>{var P=Ht();y(()=>x(P,a()("button.save_process"))),D(j,P)},j=>{var P=Ht();y(()=>x(P,a()("button.save"))),D(j,P)});var F=d(m,2);ft(F,()=>u(i),j=>{var P=vo(),$=o(P),X=o($),ut=o(X),ct=d($,2),xt=o(ct),It=o(xt);y(()=>x(It,a()("msg.hide_message"))),y(()=>{ge(P,`${(u(s)?"notice-error":"notice-success")??""} notice is-dismissible`),x(ut,u(i))}),J("click",ct,()=>b(i,"")),D(j,P)}),y(()=>C.disabled=u(c)),I(B,()=>r().title,j=>r(r().title=j,!0)),Lr(st,()=>r().start_status,j=>r(r().start_status=j,!0)),Lr(At,()=>r().emoji,j=>r(r().emoji=j,!0)),I(ae,()=>r().initial_greeting,j=>r(r().initial_greeting=j,!0)),I(xe,()=>r().prompt_system,j=>r(r().prompt_system=j,!0)),J("submit",m,p),D(t,v),Bt()}var go=Q('<div><p><strong> </strong></p> <button type="button" class="notice-dismiss"><span class="screen-reader-text"> </span></button></div>'),bo=Q('<form method="post"><h2> </h2> <div style="background-color: #f9f9f9; padding: 20px; margin-bottom: 30px; border: 1px solid #ccc;"><table class="form-table" role="presentation"><tbody><tr><th scope="row">Primary Color</th><td><input name="primary_color" type="text"></td></tr><tr><th scope="row">Secondary Color</th><td><input name="secondary_color" type="text"></td></tr><tr><th scope="row">Background Color</th><td><input name="background_color" type="text"></td></tr><tr><th scope="row">Background Text Color</th><td><input name="background_text_color" type="text"></td></tr><tr><th scope="row">Background Input Color</th><td><input name="background_input_color" type="text"></td></tr><tr><th scope="row">Outline Input Color</th><td><input name="outline_input_color" type="text"></td></tr><tr><th scope="row">Button Color</th><td><input name="button_color" type="text"></td></tr><tr><th scope="row">Hover Button Color</th><td><input name="hover_button_color" type="text"></td></tr><tr><th scope="row">Cancel Btn File Color</th><td><input name="cancel_btn_file_color" type="text"></td></tr><tr><th scope="row">Animation Dot Color</th><td><input name="animation_dot_color" type="text"></td></tr><tr><th scope="row">Background Gradient Header Color</th><td><input name="header_background_gradient_col" type="text" class="regular-text"></td></tr></tbody></table></div> <h2> </h2> <div style="background-color: #f9f9f9; padding: 20px; margin-bottom: 30px; border: 1px solid #ccc;"><table class="form-table" role="presentation"><tbody><tr><th scope="row">Input Placeholder</th><td><input type="text" name="input_placeholder" class="regular-text"></td></tr><tr><th scope="row">Chatbot Width Narrow</th><td><input type="text" name="width_narrow"></td></tr><tr><th scope="row">Chatbot Height Narrow</th><td><input type="text" name="height_narrow"></td></tr><tr><th scope="row">Chatbot Right Margin</th><td><input type="text" name="right_margin"></td></tr><tr><th scope="row">Chatbot Bottom Margin</th><td><input type="text" name="bottom_margin"></td></tr><tr><th scope="row">Chatbot Border Radius</th><td><input type="text" name="border_radius"></td></tr></tbody></table></div> <h2> </h2> <div style="background-color: #f9f9f9; padding: 20px; margin-bottom: 20px; border: 1px solid #ccc;"><table class="form-table" role="presentation"><tbody><tr><th scope="row">Toggler Right Margin</th><td><input type="text" name="toggler_right_margin"></td></tr><tr><th scope="row">Toggler Bottom Margin</th><td><input type="text" name="toggler_bottom_margin"></td></tr><tr><th scope="row">Toggler Radius</th><td><input type="text" name="toggler_border_radius"></td></tr><tr><th scope="row">Toggler Size</th><td><input type="text" name="toggler_size"></td></tr></tbody></table></div> <p class="submit"><button type="submit" name="submit" class="button button-primary"><!></button></p></form> <!>',1);function yo(t,e){Wt(e,!1);const n=re(),a=()=>ee(ye,"$t",n);let r=Ut(e,"initData",12),i=Y(""),s=Y(!1),c=Y(!1),l={primary_color:"#05b6fb",secondary_color:"#f2f2f2",background_color:"#fff",background_text_color:"#f2f2ff",background_input_color:"#fff",outline_input_color:"#c7ebf9",button_color:"#606060",hover_button_color:"#3bc4f9",cancel_btn_file_color:"#FF0000",animation_dot_color:"#66baff",header_background_gradient_color:"linear-gradient(170deg, rgba(5,156,215,1) 22%, rgba(95,217,255,1) 67%)",width_narrow:"400px",height_narrow:"80vh",right_margin:"2rem",bottom_margin:"8rem",border_radius:"0.75rem",toggler_right_margin:"35px",toggler_bottom_margin:"30px",toggler_border_radius:"50%",toogler_size:"50px"};eo(async()=>{jQuery(document).ready(function(w){w('input[name*="color"]').wpColorPicker()})});async function p(w){w.preventDefault(),b(i,""),b(c,!0),b(s,!1);const kt=new FormData(w.target);r(r().styles=Object.fromEntries(kt.entries()),!0),delete r().pages;const wr={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",data:r(),security:r().nonce})};try{const De=await fetch(`${window.ajaxurl}?action=update`,wr);if(!De.ok)throw new Error("msg.network_error");if(!(await De.json()).success)throw new Error(a()("msg.network_error"));b(i,a()("msg.settings_saved"))}catch(De){b(s,!0),b(i,De.message)}b(c,!1)}Dt(()=>Xt(r()),()=>{r().input_placeholder}),Dt(()=>Xt(r()),()=>{r(r().styles=r().styles&&typeof r().styles=="object"&&Object.keys(r().styles).length>0?r().styles:l,!0)}),pr(),te();var _=bo(),v=Ot(_),f=o(v),m=o(f);y(()=>x(m,a()("appearance.color_settings")));var g=d(f,2),k=o(g),h=o(k),z=o(h),R=d(o(z)),S=o(R),E=d(z),T=d(o(E)),U=o(T),B=d(E),A=d(o(B)),H=o(A),V=d(B),et=d(o(V)),st=o(et),lt=d(V),K=d(o(lt)),_t=o(K),wt=d(lt),mt=d(o(wt)),Tt=o(mt),At=d(wt),Z=d(o(At)),rt=o(Z),nt=d(At),Kt=d(o(nt)),Ct=o(Kt),St=d(nt),Zt=d(o(St)),ne=o(Zt),ae=d(St),Vt=d(o(ae)),we=o(Vt),Qe=d(ae),Xe=d(o(Qe)),xe=o(Xe),ke=d(g,2),Ee=o(ke);y(()=>x(Ee,a()("appearance.widget_settings")));var oe=d(ke,2),L=o(oe),O=o(L),N=o(O),C=d(o(N)),G=o(C),F=d(N),j=d(o(F)),P=o(j),$=d(F),X=d(o($)),ut=o(X),ct=d($),xt=d(o(ct)),It=o(xt),ze=d(ct),Pe=d(o(ze)),tr=o(Pe),Te=d(ze),ie=d(o(Te)),er=o(ie),Ae=d(oe,2),Se=o(Ae);y(()=>x(Se,a()("appearance.toggler_button_settings")));var Ie=d(Ae,2),Oe=o(Ie),Ce=o(Oe),je=o(Ce),rr=d(o(je)),qe=o(rr),Re=d(je),se=d(o(Re)),tt=o(se),Dn=d(Re),Mo=d(o(Dn)),Lo=o(Mo),Fo=d(Dn),Wo=d(o(Fo)),Bo=o(Wo),Ho=d(Ie,2),Nn=o(Ho),Go=o(Nn);ft(Go,()=>u(c),w=>{var kt=Ht();y(()=>x(kt,a()("button.save_process"))),D(w,kt)},w=>{var kt=Ht();y(()=>x(kt,a()("button.save"))),D(w,kt)});var Uo=d(v,2);ft(Uo,()=>u(i),w=>{var kt=go(),wr=o(kt),De=o(wr),$n=o(De),Mn=d(wr,2),Ko=o(Mn),Zo=o(Ko);y(()=>x(Zo,a()("msg.hide_message"))),y(()=>{ge(kt,`${(u(s)?"notice-error":"notice-success")??""} notice is-dismissible`),x($n,u(i))}),J("click",Mn,()=>b(i,"")),D(w,kt)}),y(()=>{Ga(S,r().styles.primary_color),Nn.disabled=u(c)}),I(U,()=>r().styles.secondary_color,w=>r(r().styles.secondary_color=w,!0)),I(H,()=>r().styles.background_color,w=>r(r().styles.background_color=w,!0)),I(st,()=>r().styles.background_text_color,w=>r(r().styles.background_text_color=w,!0)),I(_t,()=>r().styles.background_input_color,w=>r(r().styles.background_input_color=w,!0)),I(Tt,()=>r().styles.outline_input_color,w=>r(r().styles.outline_input_color=w,!0)),I(rt,()=>r().styles.button_color,w=>r(r().styles.button_color=w,!0)),I(Ct,()=>r().styles.hover_button_color,w=>r(r().styles.hover_button_color=w,!0)),I(ne,()=>r().styles.cancel_btn_file_color,w=>r(r().styles.cancel_btn_file_color=w,!0)),I(we,()=>r().styles.animation_dot_color,w=>r(r().styles.animation_dot_color=w,!0)),I(xe,()=>r().styles.header_background_gradient_col,w=>r(r().styles.header_background_gradient_col=w,!0)),I(G,()=>r().input_placeholder,w=>r(r().input_placeholder=w,!0)),I(P,()=>r().styles.width_narrow,w=>r(r().styles.width_narrow=w,!0)),I(ut,()=>r().styles.height_narrow,w=>r(r().styles.height_narrow=w,!0)),I(It,()=>r().styles.right_margin,w=>r(r().styles.right_margin=w,!0)),I(tr,()=>r().styles.bottom_margin,w=>r(r().styles.bottom_margin=w,!0)),I(er,()=>r().styles.border_radius,w=>r(r().styles.border_radius=w,!0)),I(qe,()=>r().styles.toggler_right_margin,w=>r(r().styles.toggler_right_margin=w,!0)),I(tt,()=>r().styles.toggler_bottom_margin,w=>r(r().styles.toggler_bottom_margin=w,!0)),I(Lo,()=>r().styles.toggler_border_radius,w=>r(r().styles.toggler_border_radius=w,!0)),I(Bo,()=>r().styles.toggler_size,w=>r(r().styles.toggler_size=w,!0)),J("submit",v,p),D(t,_),Bt()}const yr=`Product descriptions can be edited. If the list of products you are describing contains more than one item, shorten the descriptions, keeping the most important information. \r
\r
In the ===HEADER=== section you can specify how many products you are returning, always specify the true quantity of goods. In the ===FOOTER=== section, inform the user if the goods are on promotion, otherwise do not inform that the product is not on promotion. In the ===FOOTER=== section, pay attention to the name of the goods. \r
\r
===FORMAT===\r
Create content in the ===HEADER=== and ===FOOTER=== sections in your own words. Keep the following response format exactly - with sections ===HEADER===, ===LIST=== and ===FOOTER===\r
            \r
In the ===LIST=== section, product items must be in CSV format.   \r
Here are the response templates:\r
\r
===HEADER===\r
I found one interesting camera for you.\r
===LIST===\r
id, title, description, price, regular_price, rating, is_promotion\r
"0", "Sony Alpha a6500 4K", "Microless Sony Alpha a6400 4K is equipped with a 24.2-megapixel APS-C Exmor CMOS sensor, fast AF 0.02 sec, and 4K 30P video recording. It also offers Wi-Fi connectivity and a high-resolution viewfinder.", "2000", "2400", "5.0", "is promotion price" \r
===FOOTER===\r
This camera is on promotion, if you want to see more cameras (like DSLRs), let me know! \r
\r
\r
Another response pattern:\r
===HEADER===\r
I can offer one fashionable t-shirt for you:\r
===LIST===\r
id, title, description, price, regular_price, rating, is_promotion\r
"0", "Men's shirt „Unique - No One Like Me”", "Highlight your uniqueness and confidence with this unique t-shirt! The slogan „Unique - No One Like Me” speaks for itself - you are one of a kind, unique and do not let yourself be forced into patterns. The high-quality print and comfortable, breathable fabric make this the perfect everyday T-shirt.", "24.99", "24.99", "4.8", "" \r
"1", "Girl shirt „Unique - No Two Like Me”", "Highlight your uniqueness and confidence with this unique t-shirt! The slogan „Unique - No One Like Me” speaks for itself - you are one of a kind, unique and do not let yourself be forced into patterns.", "14.99", "14.99", "4.7", "" \r
===FOOTER===\r
If you want to see more shirts, let me know!`,wo=`#keywords\r
Keywords from the name, product description, if there is no keyword, ask to specify the question. Do not add terms related to attributes.\r
\r
#limit\r
Maximum number of products to be returned\r
\r
#price_min\r
Minimum product price\r
\r
#price_max\r
Maximum product price\r
\r
#rating_min\r
Minimum product rating\r
\r
#rating_max\r
Maximum product rating\r
\r
#promotional\r
Set true to search only for products at promotional prices (price < regular price)\r
\r
#category\r
Keywords category, if the user specifies the phrase „in category [category name]”, extract this value and assign it as a parameter\r
\r
#attributes\r
Attributes JSON string with product filters. If the user mentions the color of the product in the query, e.g. (“find me a black flashlight”), size (“small”), extract it and add it to this argument.\r
`;var xo=Q('<tr><td style="width: 2%;"><input type="checkbox" style="margin: 0;"></td><td style="width: 2%;"> </td><td style="width: 15%; text-align: left;" contenteditable="true" data-placeholder="Tytuł"></td><td style="text-align: left;" contenteditable="true" data-placeholder="Opis"></td><td style="width: 5%;" contenteditable="true" data-placeholder="5.99"></td><td style="width: 5%;" contenteditable="true" data-placeholder="5.99"></td><td style="width: 4%;" contenteditable="true" data-placeholder="5.0"></td><td style="width: 4%;"> </td></tr>'),ko=Q('<table class="example" style="margin-bottom: 4px;"><thead><tr><th></th><th>Id</th><th>Title</th><th>Description</th><th>Price</th><th>Regular price</th><th>Rating</th><th>Is promotion</th></tr></thead><tbody></tbody></table> <button style="border-radius: 0; line-height: 1.5; min-height: 20px;" class="button button-secondary">Usuń</button> <button style="border-radius: 0;  line-height: 1.5; min-height: 20px;" class="button button-secondary">Dodaj</button>',1);function Eo(t,e){Wt(e,!1);const n=[];let a=Ut(e,"items",12),r=Y([]);function i(){a(a().filter(k=>!u(r).includes(k.id))),b(r,[])}function s(){const k=a().length?Math.max(...a().map(h=>h.id))+1:1;a().push({id:k.toString(),title:"",description:"",price:"0.00",regular_price:"0.00",rating:"",is_promotion:""}),a(a())}function c(k){const h=(k??"").toString().replace(/,/g,".").replace(/[^0-9.]/g,"");if(h==="")return h;const z=parseFloat(h);return isNaN(z)||z<1?"":z.toFixed(1)}function l(k){const h=(k??"").toString().replace(/,/g,".").replace(/[^0-9.]/g,"");if(h==="")return h;const z=parseFloat(h);return isNaN(z)?"":z.toFixed(2)}function p(k,h){return parseFloat(h)>parseFloat(k)?"is promotion price":""}te();var _=ko(),v=Ot(_),f=d(o(v));Ve(f,5,a,Ze,(k,h)=>{var z=xo(),R=o(z),S=o(R),E,T=d(R),U=o(T),B=d(T),A=d(B),H=d(A),V=d(H),et=d(V),st=d(et),lt=o(st);y(()=>{E!==(E=u(h).id)&&(S.value=(S.__value=u(h).id)==null?"":u(h).id),x(U,u(h).id),x(lt,u(h).is_promotion)}),Va(n,[],S,()=>(u(h).id,u(r)),K=>b(r,K)),Je("textContent",B,()=>u(h).title,K=>(u(h).title=K,it(()=>a()))),Je("textContent",A,()=>u(h).description,K=>(u(h).description=K,it(()=>a()))),Je("textContent",H,()=>u(h).price,K=>(u(h).price=K,it(()=>a()))),J("blur",H,()=>{u(h).price=l(u(h).price),it(()=>a()),u(h).is_promotion=p(u(h).price,u(h).regular_price),it(()=>a())}),Je("textContent",V,()=>u(h).regular_price,K=>(u(h).regular_price=K,it(()=>a()))),J("blur",V,()=>{u(h).regular_price=l(u(h).regular_price),it(()=>a()),u(h).is_promotion=p(u(h).price,u(h).regular_price),it(()=>a())}),Je("textContent",et,()=>u(h).rating,K=>(u(h).rating=K,it(()=>a()))),J("blur",et,()=>(u(h).rating=c(u(h).rating),it(()=>a()))),D(k,z)});var m=d(v,2),g=d(m,2);y(()=>m.disabled=u(r).length===0),J("click",m,i),J("click",g,s),D(t,_),Bt()}var zo=Q('<div style="border: solid 1px #d5d6d8; border-radius: 5px; padding: 20px 30px;"><table class="form-table" role="presentation"><tbody><tr><th scope="row"> <br> ===HEADER===</th><td><textarea style="width: 100%;" name="header" rows="3"></textarea></td></tr><tr><th scope="row"> <br> ===LIST===</th><td><!></td></tr><tr><th scope="row"> <br> ===FOOTER===</th><td><textarea style="width: 100%;" name="footer" rows="3"></textarea></td></tr></tbody></table> <button style="color: #dc3545; border-color: #dc3545; " class="button button-secondary"> </button></div>'),Po=Q('<div style="margin: 15px 10px;"><button class="button button-secondary"> </button></div> <!>',1),To=Q('<table class="form-table" role="presentation"><tbody><tr><th scope="row">Keywords</th><td><textarea name="keywords" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Limit</th><td><textarea name="limit" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Promotional</th><td><textarea name="promotional" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Price max</th><td><textarea name="price_max" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Price min</th><td><textarea name="price_min" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Rating max</th><td><textarea name="rating_max" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Rating min</th><td><textarea name="rating_min" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Category</th><td><textarea name="category" rows="2" cols="100"></textarea></td></tr><tr><th scope="row">Attributes</th><td><textarea name="attributes" rows="2" cols="100"></textarea></td></tr></tbody></table>'),Ao=Q('<div><p><strong> </strong></p> <button type="button" class="notice-dismiss"><span class="screen-reader-text"> </span></button></div>'),So=Q('<div><h2>AI Products Search Tool</h2> <div class="chat-text" style="margin-bottom: 60px;"><!></div>  <h3> </h3> <div style="border-top: 1px solid #d5d6d8; padding-top: 10px; margin-bottom: 50px;"><table class="form-table" role="presentation"><tbody><tr><th scope="row"> </th><td><textarea name="system_prompt" rows="8" cols="100"></textarea></td></tr></tbody></table></div> <h3> </h3> <div style="border-top: 1px solid #d5d6d8; padding-top: 10px; margin-bottom: 50px;"><!> <div style="margin: 55px 10px 15px; 10px; "><button class="button button-primary"> </button></div></div> <h3> </h3> <div style="border-top: 1px solid #d5d6d8; padding-top: 10px; margin-bottom: 50px;"><button class="button button-secondary" style="margin: 15px 10px;"> </button> <!></div> <p class="submit"><button class="button button-primary"><!></button></p></div> <!>',1);function Io(t,e){var oe;Wt(e,!1);const n=re(),a=()=>ee(ye,"$t",n),r=Y(),i=Y(),s=Y(),c=Y();let l=Ut(e,"initData",12),p=Y(""),_=Y(!1),v=Y(!1),f=Y(!1),m=Y([]);l(l().tools=typeof l().tools=="object"&&l().tools!==null?l().tools:{},!0),l(l().tools.product_list=l().tools.product_list&&typeof l().tools.product_list=="object"&&Object.keys(l().tools.product_list).length>0?l().tools.product_list:{},!0),l((oe=l().tools.product_list).parameters??(oe.parameters=h()),!0);function g(L){return L.split(/^===FORMAT===/m)[0].trim()}function k(L){const O=/^===HEADER===\r?\n([\s\S]*?)\r?\n^===LIST===\r?\n([\s\S]*?)\r?\n^===FOOTER===\r?\n([\s\S]*?)(?=(?:\r?\n^===HEADER===|$))/gm,N=[];let C;for(;(C=O.exec(L))!==null;)N.push({header:C[1].trim(),list:R(C[2].trim()),footer:C[3].trim()});return N}function h(){const L=/^#([^\r\n]+)\r?\n([\s\S]*?)(?=^#|$)/gm,O={};for(const N of wo.matchAll(L)){const C=N[1].trim(),G=N[2].trim();O[C]=G}return O}async function z(L){b(p,""),b(v,!0),b(_,!1),delete l().pages,b(i,u(i).trim()),b(i,u(i)+`

===FORMAT===
Create content in the ===HEADER=== and ===FOOTER=== sections in your own words. Keep the following response format exactly - with sections ===HEADER===, ===LIST=== and ===FOOTER===
            
In the ===LIST=== section, product items must be in CSV format.   
Here are the response templates:`),l(l().tools.product_list.prompt_system=u(i),!0),l(l().tools.product_list.parameters=u(c),!0);let O="";u(s).forEach((C,G)=>{O+=`

===HEADER===
${C.header}
===LIST===
id, title, description, price, regular_price, rating, is_promotion
`,C.list.forEach(F=>{O+=`"${F.id}", "${F.title}", "${F.description}", "${F.price}", "${F.regular_price}", "${F.rating}", "${F.is_promotion}"
`}),O+=`===FOOTER===
${C.footer}
`,O+=G+1<u(s).length?`
Another response pattern:`:""}),l(l().tools.product_list.prompt_system+=O,!0);const N={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",data:l(),security:l().nonce})};try{const C=await fetch(`${window.ajaxurl}?action=update`,N);if(!C.ok)throw new Error("msg.network_error");if(!(await C.json()).success)throw new Error(a()("msg.network_error"));b(p,a()("msg.settings_saved"))}catch(C){b(_,!0),b(p,C.message)}b(v,!1)}function R(L){const O=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),N=[];let C=[],G="",F=!1;for(let P=0;P<O.length;(P+=1)-1){const $=O[P];$==='"'?F&&O[P+1]==='"'?(G+='"',P+=1):F=!F:$===","&&!F?(C.push(G),G=""):$===`
`&&!F?(C.push(G),N.push(C),C=[],G=""):G+=$}(G!==""||C.length>0)&&(C.push(G),N.push(C));const j=N.shift().map(P=>P.trim());return N.map(P=>{const $={};return j.forEach((X,ut)=>{$[X]=(P[ut]||"").trim()}),$})}function S(){u(s).push({header:"",list:[{id:"1",title:"",description:"",price:"0.00",regular_price:"0.00",rating:"",is_promotion:""}],footer:""}),b(s,u(s))}function E(L){u(s).splice(L,1),b(s,u(s))}Dt(()=>(Xt(l()),yr),()=>{b(r,l().tools.product_list.prompt_system??yr)}),Dt(()=>u(r),()=>{b(i,g(u(r)))}),Dt(()=>u(r),()=>{b(s,k(u(r)))}),Dt(()=>Xt(l()),()=>{b(c,l().tools.product_list.parameters)}),pr(),te();var T=So(),U=Ot(T),B=d(o(U),2),A=o(B);Tn(A,()=>a()("tools.product_list.system_prompt"));var H=d(B,2),V=o(H);y(()=>x(V,a()("tools.instructions")));var et=d(H,2),st=o(et),lt=o(st),K=o(lt),_t=o(K),wt=o(_t);y(()=>x(wt,a()("settings.system_prompt")));var mt=d(_t),Tt=o(mt),At=d(et,2),Z=o(At);y(()=>x(Z,a()("tools.examples")));var rt=d(At,2),nt=o(rt);Ve(nt,1,()=>u(s),Ze,(L,O,N)=>{var C=Po(),G=Ot(C),F=o(G),j=o(F);y(()=>x(j,u(m)[N]?`${a()("tools.hide_example")} #${N+1} >>>`:`${a()("tools.show_example")} #${N+1} >>>`));var P=d(G,2);ft(P,()=>u(m)[N],$=>{var X=zo(),ut=o(X),ct=o(ut),xt=o(ct),It=o(xt),ze=o(It);y(()=>x(ze,a()("tools.header_section")));var Pe=d(It),tr=o(Pe),Te=d(xt),ie=o(Te),er=o(ie);y(()=>x(er,a()("tools.list_section")));var Ae=d(ie),Se=o(Ae);Eo(Se,{get items(){return u(O).list}});var Ie=d(Te),Oe=o(Ie),Ce=o(Oe);y(()=>x(Ce,a()("tools.footer_section")));var je=d(Oe),rr=o(je),qe=d(ut,2),Re=o(qe);y(()=>x(Re,a()("tools.remove_example"))),I(tr,()=>u(O).header,se=>(u(O).header=se,it(()=>(u(s),u(r),l(),yr)))),I(rr,()=>u(O).footer,se=>(u(O).footer=se,it(()=>(u(s),u(r),l(),yr)))),J("click",qe,()=>E(N)),D($,X)}),J("click",F,()=>bt(m,u(m)[N]=!u(m)[N])),D(L,C)});var Kt=d(nt,2),Ct=o(Kt),St=o(Ct);y(()=>x(St,a()("tools.add_new_example")));var Zt=d(rt,2),ne=o(Zt);y(()=>x(ne,a()("tools.parameter_descriptions")));var ae=d(Zt,2),Vt=o(ae),we=o(Vt);y(()=>x(we,u(f)?`${a()("tools.hide_parameter_descriptions")} >>>`:`${a()("tools.show_parameter_descriptions")} >>>`));var Qe=d(Vt,2);ft(Qe,()=>u(f),L=>{var O=To(),N=o(O),C=o(N),G=d(o(C)),F=o(G),j=d(C),P=d(o(j)),$=o(P),X=d(j),ut=d(o(X)),ct=o(ut),xt=d(X),It=d(o(xt)),ze=o(It),Pe=d(xt),tr=d(o(Pe)),Te=o(tr),ie=d(Pe),er=d(o(ie)),Ae=o(er),Se=d(ie),Ie=d(o(Se)),Oe=o(Ie),Ce=d(Se),je=d(o(Ce)),rr=o(je),qe=d(Ce),Re=d(o(qe)),se=o(Re);I(F,()=>u(c).keywords,tt=>bt(c,u(c).keywords=tt)),I($,()=>u(c).limit,tt=>bt(c,u(c).limit=tt)),I(ct,()=>u(c).promotional,tt=>bt(c,u(c).promotional=tt)),I(ze,()=>u(c).price_max,tt=>bt(c,u(c).price_max=tt)),I(Te,()=>u(c).price_min,tt=>bt(c,u(c).price_min=tt)),I(Ae,()=>u(c).rating_max,tt=>bt(c,u(c).rating_max=tt)),I(Oe,()=>u(c).rating_min,tt=>bt(c,u(c).rating_min=tt)),I(rr,()=>u(c).category,tt=>bt(c,u(c).category=tt)),I(se,()=>l().tools.product_list.parameters.attributes,tt=>l(l().tools.product_list.parameters.attributes=tt,!0)),D(L,O)});var Xe=d(ae,2),xe=o(Xe),ke=o(xe);ft(ke,()=>u(v),L=>{var O=Ht();y(()=>x(O,a()("button.save_process"))),D(L,O)},L=>{var O=Ht();y(()=>x(O,a()("button.save"))),D(L,O)});var Ee=d(U,2);ft(Ee,()=>u(p),L=>{var O=Ao(),N=o(O),C=o(N),G=o(C),F=d(N,2),j=o(F),P=o(j);y(()=>x(P,a()("msg.hide_message"))),y(()=>{ge(O,`${(u(_)?"notice-error":"notice-success")??""} notice is-dismissible`),x(G,u(p))}),J("click",F,()=>b(p,"")),D(L,O)}),I(Tt,()=>u(i),L=>b(i,L)),J("click",Ct,()=>S()),J("click",Vt,()=>b(f,!u(f))),J("click",xe,()=>z()),D(t,T),Bt()}var Oo=Q('<div><h3>Opis</h3> <p>Chatbot Zoltiq for WordPress to wtyczka, która pozwala bez wysiłku zintegrować interfejs API ChatGPT firmy OpenAI z witryną e-commerce (WooCommerce), zapewniając potężnego chatbota opartego na sztucznej inteligencji, który zapewnia lepsze wrażenia użytkownika i spersonalizowane wsparcie.</p> <p>ChatGPT to konwersacyjna platforma AI, która wykorzystuje algorytmy przetwarzania języka naturalnego i uczenia maszynowego do interakcji z użytkownikami w sposób podobny do ludzkiego. Jest przeznaczony do odpowiadania na pytania, dostarczania sugestii i angażowania się w rozmowy z użytkownikami. ChatGPT jest ważny, ponieważ może zapewnić pomoc i wsparcie osobom, które tego potrzebują, szczególnie w sytuacjach, w których wsparcie ludzkie nie jest dostępne lub jest ograniczone. Może być również wykorzystywany do automatyzacji obsługi klienta, skracania czasu reakcji i zwiększania satysfakcji klientów. Co więcej, ChatGPT może być wykorzystywany w różnych dziedzinach, takich jak opieka zdrowotna, edukacja, finanse i wiele innych.</p> <p>Chatbot Zoltiq wykorzystuje platformę OpenAI przy użyciu dużych modeli modelu LLM, ożywiając ją w witrynie WordPress.</p> <p><b>Ważna informacja:</b> Ta wtyczka wymaga klucza API od OpenAI do poprawnego działania. Klucz API można uzyskać, rejestrując się na stronie <a href="https://platform.openai.com/account/api-keys" rel="nofollow ugc" target="_blank">https://platform.openai.com/account/api-keys</a>.</p> <p></p> <h3>Oficjalne strony:</h3> <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1em;"><li><a href="https://zoltiq.com" rel="nofollow ugc" target="_blank">zoltiq.com</a></li> <li><a href="https://github.com/zoltiq/chatbot" target="_blank">https://github.com/zoltiq/chatbot</a></li></ul> <h3>Funkcje</h3> <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1em;"><li>Łatwa konfiguracja i integracja z interfejsem API ChatGPT OpenAI</li> <li>Przyjazna dla użytkownika strona ustawień do zarządzania kluczem API i innymi parametrami</li> <li>Składany interfejs chatbota, gdy nie jest używany</li> <li>Komunikat powitalny dla nowych użytkowników</li> <li>Ustawienie określające, czy chatbot powinien być otwarty czy zamknięty po otwarciu strony</li> <li>Chatbot utrzymuje stan podczas nawigacji między stronami.</li> <li>Nazwa chatbota oraz początkowe powitanie i prompt systemowy są konfigurowalne</li></ul> <h3>Minimalne wymagania</h3> <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1em;"><li>WordPress 6.3 lub wyższa</li> <li>WooCommerce 7.0 lub wyższa</li> <li>Wersja PHP 7.4 lub wyższa</li> <li>MySQL 5.7 lub wyższa</li></ul> <h3>Instalacja</h3> <ol><li>Uzyskaj klucz API, rejestrując się na stronie <a href="https://platform.openai.com/account/api-keys" rel="nofollow ugc">https://platform.openai.com/account/api-keys</a>.</li> <li>Zainstaluj i aktywuj wtyczkę Chatbot Zoltiq.</li> <li>Przejdź do ustawień wtyczki (Settings &gt; API/Model), wprowadź swój klucz API i zapisz ustawienia.</li> <li>Dostosuj wygląd widżetu Chatbota i inne parametry według potrzeb.</li></ol></div>'),Co=Q(`<div><h3>Description</h3> <p>Chatbot Zoltiq for WordPress is a plugin that allows you to effortlessly integrate OpenAI's ChatGPT API into your e-commerce (WooCommerce) site, providing you with a powerful AI-based chatbot that delivers a better user experience and personalized support.</p> <p>ChatGPT is a conversational AI platform that uses natural language processing and machine learning algorithms to interact with users in a human-like manner. It is designed to answer questions, provide suggestions and engage in conversations with users. ChatGPT is important because it can provide help and support to people who need it, especially in situations where human support is not available or is limited. It can also be used to automate customer service, reduce response times and increase customer satisfaction. What's more, ChatGPT can be used in a variety of fields, such as healthcare, education, finance and many others.</p> <p>Chatbot Zoltiq leverages the OpenAI platform using large LLM model models, bringing it to life on a WordPress site.</p> <p><b>Important notice:</b> This plugin requires an API key from OpenAI to work properly. You can obtain the API key by registering at <a href="https://platform.openai.com/account/api-keys" rel="nofollow ugc" target="_blank">https://platform.openai.com/account/api-keys</a>.</p> <p></p> <h3>Official sites:</h3> <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1em;"><li><a href="https://zoltiq.com" rel="nofollow ugc" target="_blank">zoltiq.com</a></li> <li><a href="https://github.com/zoltiq/chatbot" target="_blank">https://github.com/zoltiq/chatbot</a></li></ul> <h3>Features</h3> <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1em;"><li>Easy setup and integration with ChatGPT OpenAI API</li> <li>User-friendly settings page to manage API key and other parameters</li> <li>Welcome message at the beginning of the covesation</li> <li>Setting that determines whether the chatbot should be open or closed when the page is opened</li> <li>Chatbot maintains status and conversation history while navigating between pages</li> <li>Configurable chatbot name and system prompt</li></ul> <h3>Minimum requirements</h3> <ul style="list-style-type: disc; list-style-position: inside; padding-left: 1em;"><li>WordPress 6.3 or higher</li> <li>WooCommerce 7.0 or higher</li> <li>Wersja PHP 7.4 or higher</li> <li>MySQL 5.7 or higher</li></ul> <h3>Installing</h3> <ol><li>Get an API key by registering at <a href="https://platform.openai.com/account/api-keys" rel="nofollow ugc">https://platform.openai.com/account/api-keys</a>.</li> <li>Install and activate the Zoltiq Chatbot plugin.</li> <li>Go to the plugin settings (Settings &gt; API/Model), enter your API key and save your settings.</li> <li>Customize the appearance of the Chatbot widget and other parameters as needed.</li></ol></div>`);function jo(t){const e=re(),n=()=>ee(Fr,"$locale",e);var a=En(),r=Ot(a);ft(r,()=>n()=="pl",i=>{var s=Oo();D(i,s)},i=>{var s=Co();D(i,s)}),D(t,a)}var qo=Q("<li><button> </button></li>"),Ro=Q('<div class="chat-box"><!></div>'),Do=Q('<div class="wrap"><h1 class="screen-reader-text">Settings Zoltiq ChatBot</h1> <div class="chatbot-header"><img width="45" height="45" src="https://zoltiq.com/wp-content/uploads/2024/09/Logotyp_2.png" class="custom-logo" alt="Zoltiq" decoding="async" srcset="https://zoltiq.com/wp-content/uploads/2024/09/Logotyp_2.png 512w, https://zoltiq.com/wp-content/uploads/2024/09/Logotyp_2-300x300.png 300w, https://zoltiq.com/wp-content/uploads/2024/09/Logotyp_2-150x150.png 150w" sizes="(max-width: 45px) 100vw, 45px"> <div class="chatbot-text-logo">Zoltiq Chatbot</div></div> <h1> </h1> <div class="chat-body"><div class="chat-tab"><ul></ul></div> <!></div></div>');function No(t,e){Wt(e,!1);const n=re(),a=()=>ee(ye,"$t",n);let r=Ut(e,"items",24,()=>[]),i=Ut(e,"initData",24,()=>({})),s=Ut(e,"activeTabValue",12,1),c=Y(a()("apimodel.title"));const l=(h,z)=>()=>(s(h),b(c,z));te();var p=Do(),_=d(o(p),4),v=o(_),f=d(_,2),m=o(f),g=o(m);Ve(g,5,r,Ze,(h,z)=>{var R=qo(),S=o(R),E=Fe(()=>l(u(z).value,u(z).title)),T=o(S);y(()=>{ge(R,s()===u(z).value?"active":""),x(T,u(z).label)}),J("click",S,function(...U){var B;(B=u(E))==null||B.apply(this,U)}),D(h,R)});var k=d(m,2);Ve(k,1,r,Ze,(h,z)=>{var R=En(),S=Ot(R);ft(S,()=>s()==u(z).value,E=>{var T=Ro(),U=o(T);Ha(U,()=>u(z).component,(B,A)=>{A(B,{get initData(){return i()}})}),D(E,T)}),D(h,R)}),y(()=>x(v,u(c))),D(t,p),Bt()}function $o(t,e){Wt(e,!1);const n=re(),a=()=>ee(ye,"$t",n);let r=window.chatParams;Xa(Fr,r.locale);let i=[{label:a()("apimodel.label"),title:a()("apimodel.title"),value:1,component:co},{label:a()("settings.label"),title:a()("settings.title"),value:2,component:mo},{label:a()("appearance.label"),title:a()("appearance.title"),value:3,component:yo},{label:a()("tools.label"),title:a()("tools.title"),value:4,component:Io},{label:a()("supports.label"),title:a()("supports.title"),value:5,component:jo}];te(),No(t,{items:i,initData:r}),Bt()}return $a($o,{target:document.querySelector("#chatbotSettings")})});
